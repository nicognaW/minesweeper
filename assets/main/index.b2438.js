System.register("chunks:///_virtual/Common.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Block.ts"],(function(o){"use strict";var e,n,t;return{setters:[function(o){e=o.createForOfIteratorHelperLoose},function(o){n=o.cclegacy},function(o){t=o.Block}],execute:function(){n._RF.push({},"35f04Nz5SJJyKxFWun/08g1","Common",void 0);var c=o("common",{comboMap:new Map,blocks:[],gameDispatcher:null,allopen:function(){for(var o,n=e(c.blocks);!(o=n()).done;){o.value.getComponent(t).open()}}});n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,r,n,s,a,c,p,u,y,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,c=e.Vec3,p=e.systemEvent,u=e.SystemEvent,y=e.KeyCode,h=e.Component}],execute:function(){var l,v,_;s._RF.push({},"c4258gzagBFF4TxWGH4Nsad","Player",void 0);var d=a.ccclass,g=a.property;e("Player",d("Player")((_=t((v=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,o(r(t),"moveSpeed",_,r(t)),n(r(t),"_targetPos",new c),n(r(t),"_moving",!1),t}i(t,e);var s=t.prototype;return s.start=function(){p.on(u.EventType.KEY_DOWN,(function(e){e.keyCode===y.KEY_W&&(this._moving=!0,this._targetPos.y+=this.moveSpeed),e.keyCode===y.KEY_A&&(this._moving=!0,this._targetPos.x-=this.moveSpeed),e.keyCode===y.KEY_S&&(this._moving=!0,this._targetPos.y-=this.moveSpeed),e.keyCode===y.KEY_D&&(this._moving=!0,this._targetPos.x+=this.moveSpeed)}),this)},s.update=function(e){this._moving&&this.node.setPosition(this._targetPos)},t}(h)).prototype,"moveSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),l=v))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/Block.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Common.ts"],(function(t){"use strict";var s,e,i,o,n,h,r,a,c,p,l,u,d,g;return{setters:[function(t){s=t.inheritsLoose,e=t.createForOfIteratorHelperLoose,i=t.defineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,h=t._decorator,r=t.Label,a=t.systemEvent,c=t.SystemEvent,p=t.Sprite,l=t.math,u=t.Vec3,d=t.Component},function(t){g=t.common}],execute:function(){var k;t("STATUS",void 0),n._RF.push({},"d1005f4q3pNcbT0SKb0wiOu","Block",void 0);var E,m=h.ccclass;h.property;!function(t){t[t.PLACEHOLDER=-1]="PLACEHOLDER",t[t.HIDDEN=0]="HIDDEN",t[t.OPENNED=1]="OPENNED",t[t.FLAGGED=2]="FLAGGED"}(E||(E=t("STATUS",{})));t("Block",m("Block")(k=function(t){function n(){for(var s,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return s=t.call.apply(t,[this].concat(n))||this,i(o(s),"index",0),i(o(s),"isBomb",void 0),i(o(s),"status",E.PLACEHOLDER),i(o(s),"leftclicking",!1),i(o(s),"rightclicking",!1),i(o(s),"_pos",void 0),i(o(s),"_wrapperBlocks",[]),i(o(s),"_number",0),s}s(n,t);var h=n.prototype;return h.clickingMe=function(t){return Math.abs(t.getUILocation().x-this._pos.x)<12.5&&Math.abs(t.getUILocation().y-this._pos.y)<12.5},h.mine=function(t){switch(void 0===g.comboMap[t]&&(g.comboMap[t]=0),this.status){case E.HIDDEN:if(this.isBomb&&1===g.gameDispatcher.status)return g.gameDispatcher.fail(),void(this.node.getComponentsInChildren(r)[0].string="üè¥‚Äç‚ò†Ô∏è");this.open();case E.OPENNED:for(var s,i=0,o=e(this._wrapperBlocks);!(s=o()).done;){var h=s.value;null!=g.blocks[h]&&g.blocks[h].getComponent(n).status===E.FLAGGED&&i++}if(i===this._number)for(var a,c=e(this._wrapperBlocks);!(a=c()).done;){var p=a.value;null!=g.blocks[p]&&g.blocks[p].getComponent(n).status===E.HIDDEN&&(g.comboMap[t]++,console.log("["+t+"]combo: "+g.comboMap[t]),g.comboMap[t]>=20&&g.gameDispatcher.playEffect(),g.blocks[p].getComponent(n).mine(t))}0===g.comboMap[t]&&g.comboMap.delete(t);break;case E.FLAGGED:}},h.open=function(){switch(this.status){case E.HIDDEN:if(this.status=E.OPENNED,this.isBomb)this.node.getComponentsInChildren(r)[0].string="üí£";else{for(var t,s=0,i=e(this._wrapperBlocks);!(t=i()).done;){var o=t.value;null!=g.blocks[o]&&g.blocks[o].getComponent(n).isBomb&&s++}this.node.getComponentsInChildren(r)[0].string=0!==s?s.toString():"",this._number=s}break;case E.FLAGGED:this.status=E.OPENNED,this.isBomb?this.node.getComponentsInChildren(r)[0].string="üêÆ":this.node.getComponentsInChildren(r)[0].string="üå∂Ô∏è";break;case E.OPENNED:case E.PLACEHOLDER:}},h.flagToggle=function(){this.status===E.HIDDEN?(this.status=E.FLAGGED,g.gameDispatcher.updateCurrentBomb(-1)):this.status===E.FLAGGED&&(this.status=E.HIDDEN,g.gameDispatcher.updateCurrentBomb(1))},h.init=function(t){this.node.getComponentsInChildren(r)[0].string=" ",this.isBomb=t,this.status=E.HIDDEN},h.onKeyDown=function(t){},h.onMouseMove=function(t){0===t.getButton()&&this.clickingMe(t)?this.leftclicking=!0:this.leftclicking=!1},h.onMouseDown=function(t){this.status!==E.PLACEHOLDER&&2===t.getButton()&&this.clickingMe(t)&&this.status!==E.OPENNED&&this.flagToggle()},h.onMouseUp=function(t){this.clickingMe(t)&&0===t.getButton()&&this.mine(Math.round(1e5*Math.random()).toString()),this.leftclicking=!1},h.start=function(){this.index%30==0?(this._wrapperBlocks.push(-1),this._wrapperBlocks.push(this.index-30),this._wrapperBlocks.push(this.index-29),this._wrapperBlocks.push(-1),this._wrapperBlocks.push(this.index+1),this._wrapperBlocks.push(-1),this._wrapperBlocks.push(this.index+30),this._wrapperBlocks.push(this.index+31)):this.index%30==29?(this._wrapperBlocks.push(this.index-31),this._wrapperBlocks.push(this.index-30),this._wrapperBlocks.push(-1),this._wrapperBlocks.push(this.index-1),this._wrapperBlocks.push(-1),this._wrapperBlocks.push(this.index+29),this._wrapperBlocks.push(this.index+30),this._wrapperBlocks.push(-1)):(this._wrapperBlocks.push(this.index-31),this._wrapperBlocks.push(this.index-30),this._wrapperBlocks.push(this.index-29),this._wrapperBlocks.push(this.index-1),this._wrapperBlocks.push(this.index+1),this._wrapperBlocks.push(this.index+29),this._wrapperBlocks.push(this.index+30),this._wrapperBlocks.push(this.index+31)),this._pos=this.node.getWorldPosition(),a.on(c.EventType.KEY_DOWN,this.onKeyDown,this),a.on(c.EventType.MOUSE_MOVE,this.onMouseMove,this),a.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this),a.on(c.EventType.MOUSE_UP,this.onMouseUp,this)},h.update=function(t){switch(this.status){case E.HIDDEN:this.node.getChildByName("background").setScale(new u(1,1,1)),this.node.getChildByName("background").getComponent(p).color=new l.Color(0,0,0),this.leftclicking?this.node.setScale(new u(0,0,0)):this.node.setScale(new u(1,1,1));break;case E.OPENNED:this.node.setScale(new u(1,1,1)),this.node.getChildByName("Label").setScale(new u(1,1,1)),this.node.getChildByName("background").setScale(new u(0,0,0));break;case E.FLAGGED:this.node.getChildByName("background").getComponent(p).color=new l.Color(255,255,255);break;case E.PLACEHOLDER:}},n}(d))||k);n._RF.pop()}}}));

System.register("chunks:///_virtual/Dispatcher.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Block.ts","./Common.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,c,l,b,u,m,h,p,f,g,y,C,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.defineProperty},function(t){s=t.cclegacy,a=t._decorator,c=t.Prefab,l=t.Node,b=t.Label,u=t.instantiate,m=t.ParticleSystem2D,h=t.systemEvent,p=t.SystemEvent,f=t.KeyCode,g=t.Component},function(t){y=t.Block,C=t.STATUS},function(t){d=t.common}],execute:function(){var k,D,B,E,v,I,_,A,S,T,N;t("STATUS",void 0),s._RF.push({},"d4c18MnkytC5rxmWrhSJS0L","Dispatcher",void 0);var L,R=a.ccclass,G=a.property;!function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.GAMING=1]="GAMING",t[t.FAILED=2]="FAILED",t[t.SUCCEEDED=3]="SUCCEEDED"}(L||(L=t("STATUS",{})));t("Dispatcher",(k=R("Dispatcher"),D=G({type:c}),B=G({type:l}),E=G({type:l}),v=G({type:l}),k((A=e((_=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(o(e),"blockPrfb",A,o(e)),n(o(e),"boardNode",S,o(e)),n(o(e),"currentBomb",T,o(e)),n(o(e),"particle",N,o(e)),r(o(e),"_total",480),r(o(e),"_bombCount",99),r(o(e),"bombRemaining",99),r(o(e),"status",L.INITIALIZED),r(o(e),"binaryBlocks",[]),e}i(e,t);var s=e.prototype;return s.updateCurrentBomb=function(t){if(this.bombRemaining+=t,this.currentBomb.getComponent(b).string="Ââ©‰ΩôÔºö"+this.bombRemaining+"\nÂ∑≤Ê†áÔºö"+(this._bombCount-this.bombRemaining),0===this.bombRemaining){for(var e=0;e<this._total;e++){var i=d.blocks[e].getComponent(y);if(i.isBomb&&i.status!==C.FLAGGED)return void this.fail()}this.success()}},s.fail=function(){d.allopen(),this.currentBomb.getComponent(b).string="ÂûÉÂúæ",this.status=L.FAILED},s.success=function(){this.currentBomb.getComponent(b).string="ÁâõÈÄº",d.allopen(),this.status=L.SUCCEEDED},s.generateBinaryBlocks=function(){this.bombRemaining=this._bombCount;for(var t=this._bombCount,e=0;e<this._total;e++)t-- >0?this.binaryBlocks.push(1):this.binaryBlocks.push(0);for(var i=0,n=this._total;i<n;i++){var o=Math.floor(Math.random()*n),r=this.binaryBlocks[o];this.binaryBlocks[o]=this.binaryBlocks[i],this.binaryBlocks[i]=r}for(var s=0,a=this._total;s<a;s++)1===this.binaryBlocks[s]?d.blocks[s].getComponent(y).init(!0):d.blocks[s].getComponent(y).init(!1)},s.init=function(){d.gameDispatcher=this,this.boardNode.removeAllChildren(),d.blocks=[];for(var t=0;t<480;t++){var e=u(this.blockPrfb);this.boardNode.addChild(e);var i=30*t%900,n=-30*Math.floor(t/30);e.setPosition(i,n,0),e.getComponent(y).index=t,e.getComponent(y).isBomb=!1,d.blocks.push(e)}},s.resetGame=function(){this.bombRemaining=99,this.currentBomb.getComponent(b).string="Ââ©‰ΩôÔºö"+this.bombRemaining+"\nÂ∑≤Ê†áÔºö"+(this._bombCount-this.bombRemaining),this.generateBinaryBlocks(),this.status=L.GAMING},s.playEffect=function(){d.gameDispatcher.particle.getComponent(m).resetSystem(),setTimeout((function(){d.gameDispatcher.particle.getComponent(m).stopSystem()}),500)},s.start=function(){this.init(),this.status=L.INITIALIZED,this.resetGame(),h.on(p.EventType.KEY_DOWN,(function(t){if(t.keyCode===f.KEY_R&&this.resetGame(),t.keyCode,f.KEY_C,t.keyCode===f.KEY_P)for(var e=99,i=0;i<this._total;i++){var n=d.blocks[i].getComponent(y);if(n.isBomb){if(1==e--)break;n.flagToggle()}}}),this)},s.update=function(t){},e}(g)).prototype,"blockPrfb",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(_.prototype,"boardNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(_.prototype,"currentBomb",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(_.prototype,"particle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=_))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Block.ts","./Common.ts","./Player.ts","./Dispatcher.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});